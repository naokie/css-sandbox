// Generated by CoffeeScript 1.4.0
var displayResult;

displayResult = function(data) {
  var bookmark, commentContent, _fn, _i, _len, _ref;
  $('<a />').attr({
    'href': data.url,
    'target': '_blank'
  }).text(data.title).appendTo('#title');
  $('<a />').attr({
    'href': data.entry_url,
    'target': '_blank'
  }).text("" + data.count + " users").appendTo('#count');
  $('<img />').addClass('thumbnail').attr('src', data.screenshot).appendTo('#screenshot');
  commentContent = "";
  _ref = data.bookmarks;
  _fn = function(bookmark) {
    if (bookmark.comment !== "") {
      return commentContent += "<dt>" + bookmark.user + "</dt><dd>" + bookmark.comment + "</dd>";
    }
  };
  for (_i = 0, _len = _ref.length; _i < _len; _i++) {
    bookmark = _ref[_i];
    _fn(bookmark);
  }
  $('#comment').html(commentContent);
  return this;
};

$(function() {
  $('#reloadButton').on('click', function() {
    $('#title, #count, #screenshot, #comment').empty();
    return $.getJSON('http://b.hatena.ne.jp/entry/json/?url=' + $('#appendedInputButton').val() + '&callback=?', function(data) {
      return displayResult(data);
    });
  });
  return this;
});
